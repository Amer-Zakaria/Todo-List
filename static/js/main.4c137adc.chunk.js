(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),s=n.n(c),o=(n(42),n(43),n(44),n(45),n(46),n(7)),i=n(5),u=n.n(i),l=n(11),d=n(9),j=n(6),p=Object(a.createContext)();p.displayName="TodosContext";var b=p,h=n.p+"static/media/sprite.2c32dc3a.svg",m=n(2),O=function(e){var t=e.todo,n=Object(a.useContext)(b),c=n.onModalEditCancel,s=n.onModalEditDone,o=n.onTodoChange;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)("div",{className:"modal",children:[Object(m.jsx)("input",{type:"text",className:"modal__input",placeholder:"Type any task...",value:t.newValue,onChange:function(e){return o(t.id,e.target.value)},autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&s(t)}}),Object(m.jsx)("button",{className:"modal__btn modal__cancel",onClick:function(){return c(t.id)},children:"Cancel"}),Object(m.jsx)("button",{className:"modal__btn modal__done",onClick:function(){return s(t)},children:"Done"})]}),Object(m.jsx)("div",{className:"overlay",onClick:function(){return c(t.id)}})]})},f=function(e){var t=Object(a.useContext)(b),n=t.onDelete,r=t.onComplete,c=t.onCancel,s=t.onEdit,o=e.todo,i="todo ".concat("SUCCESSFUL"===o.status?"todo--completed":""," ").concat("CANCELED"===o.status?"todo--canceled":"");return Object(m.jsxs)("div",{className:i,style:o.isChanging?{filter:"blur(.7px)"}:{},children:[o.isChanging&&Object(m.jsx)("div",{className:"spinner-container spinner-container__todo",children:Object(m.jsx)("svg",{class:"spinner",viewBox:"0 0 50 50",children:Object(m.jsx)("circle",{class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})})}),Object(m.jsxs)("div",{className:"todo__body",children:[Object(m.jsx)("p",{className:"todo__date",children:o.date}),Object(m.jsx)("div",{className:"todo__content",children:o.newValue})]}),Object(m.jsxs)("div",{className:"todo__icons",children:[Object(m.jsx)("span",{className:"icon-container icon-container--red",onClick:function(){return n(o)},children:Object(m.jsx)("svg",{className:"icon",children:Object(m.jsx)("use",{href:h+"#trash-solid"})})}),Object(m.jsx)("span",{className:"icon-container icon-container--blue",onClick:function(){return s(o.id)},children:Object(m.jsx)("svg",{className:"icon",children:Object(m.jsx)("use",{href:h+"#pen-solid"})})}),Object(m.jsx)("span",{className:"icon-container icon-container--red",onClick:function(){return c(o)},children:Object(m.jsx)("svg",{className:"icon",children:Object(m.jsx)("use",{href:h+"#cross"})})}),Object(m.jsx)("span",{className:"icon-container icon-container--green",onClick:function(){return r(o)},children:Object(m.jsx)("svg",{className:"icon",children:Object(m.jsx)("use",{href:h+"#check2-all"})})})]}),"active"===o.modalEdit?Object(m.jsx)(O,{todo:o}):null]})};var x=function(e){var t=Object(a.useContext)(b),n=t.todos,r=t.onAdd,c=t.isLoading;return Object(m.jsxs)("div",{className:"container todos",children:[Object(m.jsxs)("div",{children:[0!==n.length||c?null:Object(m.jsx)("p",{className:"todos__instruction",children:"Prees the plus sing to add a todo"}),n.map((function(e){return Object(m.jsx)(f,{todo:e},e.id)}))]}),Object(m.jsx)("div",{className:"todos__add",children:Object(m.jsx)("span",{className:"icon-container icon-container--large",onClick:r,children:Object(m.jsx)("svg",{className:"icon",children:Object(m.jsx)("use",{href:h+"#plus"})})})})]})},v=function(e){var t=Object(a.useContext)(b),n=t.onModalAddDone,c=t.onModalAddCancel;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)("div",{className:"modal",children:[Object(m.jsx)("input",{type:"text",className:"modal__input",placeholder:"Type any task...",autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&n(document.querySelector("input").value)}}),Object(m.jsx)("button",{className:"modal__btn modal__cancel",onClick:c,children:"Cancel"}),Object(m.jsx)("button",{className:"modal__btn modal__done",onClick:function(){return n(document.querySelector("input").value)},children:"Done"})]}),Object(m.jsx)("div",{className:"overlay",onClick:c})]})};function g(e){var t=e?new Date(e).toLocaleString():(new Date).toLocaleString(),n=t.slice(-6,-3);return t.replace(n,"")}var w=n(59),_=n(17);w.a.defaults.baseURL="https://todo-list-api-ml1b.onrender.com/api",w.a.defaults.withCredentials=!0,w.a.interceptors.response.use((function(e){return e.data}),function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.response&&(null===(n=t.response)||void 0===n?void 0:n.status)>=400&&(null===(a=t.response)||void 0===a?void 0:a.status)<500,401===(null===(r=t.response)||void 0===r?void 0:r.status)?(window.history.pushState({},"","/todo-list/sign-in?isAuthError=true"),window.location.reload()):404===(null===(c=t.response)||void 0===c?void 0:c.status)?_.b.error("Not Found!"):o?_.b.error(null!==(s=t.response.data.message)&&void 0!==s&&s):_.b.error("An unexpected error occurrred."),t.isExpectedError=o,e.abrupt("return",Promise.reject(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var N={get:w.a.get,post:w.a.post,patch:w.a.patch,put:w.a.put,delete:w.a.delete};var C=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(j.a)(c,2),i=s[0],p=s[1],h=Object(a.useState)(""),O=Object(j.a)(h,2),f=O[0],w=O[1],_=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r((function(e){return e.filter((function(e){return e.id!==t.id}))})),e.next=3,N.delete("/todos/"+t.id).catch((function(e){r((function(e){return Object(l.a)([].concat(Object(l.a)(e),[t]).sort((function(e,t){return new Date(e.rowDate).getTime()>new Date(t.rowDate).getTime()?1:-1})))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r((function(e){return e.map((function(e){return e.id===t.id&&(e.status="SUCCESSFUL",e.isChanging=!0),e}))})),e.next=3,N.patch("/todos/SUCCESSFUL/"+t.id).then((function(){r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{isChanging:!1}):e}))}))})).catch((function(e){r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{status:"ONGOING",isChanging:!1}):e}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r((function(e){return e.map((function(e){return e.id===t.id&&(e.status="CANCELED",e.isChanging=!0),e}))})),e.next=3,N.patch("/todos/CANCELED/"+t.id).then((function(){r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{isChanging:!1}):e}))}))})).catch((function(e){r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{status:"ONGOING",isChanging:!1}):e}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/\S/.test(t)){e.next=2;break}return e.abrupt("return");case 2:return n=-Math.floor(990*Math.random()+1),r((function(e){return[].concat(Object(l.a)(e),[{value:t,newValue:t,date:g(),rowDate:(new Date).toISOString().replace("T"," "),id:n,status:"ONGOING",modalEdit:"hidden",isChanging:!0}])})),w(""),e.prev=5,e.next=8,N.post("/todos",{details:t});case 8:return a=e.sent,e.abrupt("return",r((function(e){return e.map((function(e){return e.id===n?Object(o.a)(Object(o.a)({},e),{},{id:a.id,isChanging:!1}):e}))})));case 12:return e.prev=12,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",r((function(e){return e.filter((function(e){return e.id!==n}))})));case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){w("active"),window.scrollTo(0,document.body.scrollHeight)},E=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/\S/.test(t.newValue)){e.next=2;break}return e.abrupt("return");case 2:if(t.newValue!==t.value){e.next=4;break}return e.abrupt("return",r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{modalEdit:"hidden"}):e}))})));case 4:return n=t.value,r((function(e){return e.map((function(e){return e.id===t.id&&(e.value=e.newValue,e.modalEdit="hidden",e.isChanging=!0),e}))})),e.prev=6,e.next=9,N.patch("/todos/"+t.id,{details:t.newValue});case 9:r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{isChanging:!1}):e}))})),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",r((function(e){return e.map((function(e){return e.id===t.id?Object(o.a)(Object(o.a)({},e),{},{newValue:n,value:n,isChanging:!1}):e}))})));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),F={todos:n,onModalAddCancel:function(){w("")},onModalAddDone:k,onModalEditDone:E,onModalEditCancel:function(e){var t=n.map((function(t){return t.id===e&&(t.newValue=t.value,t.modalEdit=""),t}));r(t)},onDelete:_,onCancel:y,onComplete:C,onEdit:function(e){var t=n.map((function(t){return t.id===e&&(t.modalEdit="active"),t}));r(t)},onTodoChange:function(e,t){var a=n.map((function(n){return n.id===e&&(n.newValue=t),n}));r(a)},onAdd:S,isLoading:i};return Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,N.get("todos");case 4:t=e.sent,r(t.map((function(e){var t=e.id,n=e.details,a=e.addedAt,r=e.status;return{value:n,newValue:n,date:g(a),rowDate:a,id:t,status:r,modalEdit:"hidden",isChanging:!1}}))),p(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),document.body.onkeydown=function(e){" "!==e.key||e.target.classList.contains("modal__input")||e.preventDefault()},document.body.onkeyup=function(e){e.target.classList.contains("modal__input")||" "===e.key&&S()},Object(m.jsx)(b.Provider,{value:F,children:Object(m.jsxs)("div",{className:"App",children:[i&&Object(m.jsx)("div",{className:"spinner-container spinner-container__app",children:Object(m.jsx)("svg",{class:"spinner",viewBox:"0 0 50 50",children:Object(m.jsx)("circle",{class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})})}),Object(m.jsx)("h1",{children:"Todo List"}),Object(m.jsx)(x,{}),"active"===f?Object(m.jsx)(v,{}):null]})})},y=n(14),k=n(35),S=n.n(k);var E=function(){var e=Object(a.useMemo)((function(){return function(){var e={client_id:"912237735585-nig1mv1e070tuut7bbsttomjrc7909u8.apps.googleusercontent.com",redirect_uri:"".concat("https://todo-list-api-ml1b.onrender.com/api","/api/users/oauth/google"),access_type:"offline",response_type:"code",prompt:"consent",scope:["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(" ")},t=new URLSearchParams(e);return"".concat("https://accounts.google.com/o/oauth2/v2/auth","?").concat(t.toString())}()}),[]);return Object(m.jsx)(S.a,{style:{width:"100%",background:"#f3f2f7",color:"#333",borderRadius:"5px","&:hover":{background:"#000000 !important"}},label:"Continue with Google",onClick:function(){return window.open(e,"_self")}})},F=n(4);function D(){var e=Object(F.n)(),t=Object(a.useState)({name:"",email:"",password:""}),n=Object(j.a)(t,2),r=n[0],c=r.name,s=r.email,i=r.password,l=n[1],p=Object(a.useState)({name:"",email:"",password:""}),b=Object(j.a)(p,2),h=b[0],O=b[1],f=Object(a.useState)(!1),x=Object(j.a)(f,2),v=x[0],g=x[1];function w(){return(w=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),t.prev=1,t.next=4,N.post("/users",{name:c,email:s,password:i});case 4:g(!1),e("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),g(!1),(null===(n=t.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.validation)&&O(t.t0.response.data.validation);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(m.jsx)("div",{className:"auth",children:Object(m.jsx)("form",{className:"auth__container",children:Object(m.jsxs)("fieldset",{className:"auth__content",children:[Object(m.jsx)("h1",{className:"auth__title",children:"Sign Up"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(E,{}),Object(m.jsx)("div",{className:"auth__or",children:"or"}),Object(m.jsxs)("div",{className:"auth__form-element",children:[Object(m.jsx)("label",{htmlFor:"nameField",children:"Name"}),Object(m.jsx)("input",{autoFocus:!0,type:"text",value:c,onChange:function(e){O((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:""})})),l((function(t){return Object(o.a)(Object(o.a)({},t),{},{name:e.target.value})}))},placeholder:"Amer Zakaria",id:"nameField",style:h.name?{marginBottom:0}:{}}),h.name&&Object(m.jsx)("p",{className:"auth__field-error",children:h.name})]}),Object(m.jsxs)("div",{className:"auth__form-element",children:[Object(m.jsx)("label",{htmlFor:"emailField",children:"Email"}),Object(m.jsx)("input",{type:"text",value:s,onChange:function(e){O((function(e){return Object(o.a)(Object(o.a)({},e),{},{email:""})})),l((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},placeholder:"amerzkfe1234@gmail.com",id:"emailField",style:h.email?{marginBottom:0}:{}}),h.email&&Object(m.jsx)("p",{className:"auth__field-error",children:h.email})]}),Object(m.jsxs)("div",{className:"auth__form-element",children:[Object(m.jsx)("label",{htmlFor:"passwordField",children:"Password"}),Object(m.jsx)("input",{type:"password",value:i,onChange:function(e){O((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:""})})),l((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},placeholder:"********",id:"passwordField",style:h.password?{marginBottom:0}:{}}),h.password&&Object(m.jsx)("p",{className:"auth__field-error",children:h.password})]}),Object(m.jsx)("input",{type:"submit",disabled:v,value:"Send",onClick:function(){return function(){return w.apply(this,arguments)}()}}),Object(m.jsx)("div",{className:"auth__instead",children:Object(m.jsx)(y.a,{to:"/sign-in",className:"button button-outline",children:"Sign In Instead"})})]})]})})})}function A(){var e=Object(F.n)(),t=Object(y.d)(),n=Object(j.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({email:"",password:""}),i=Object(j.a)(s,2),l=i[0],p=l.email,b=l.password,h=i[1],O=Object(a.useState)({email:"",password:""}),f=Object(j.a)(O,2),x=f[0],v=f[1],g=Object(a.useState)(!1),w=Object(j.a)(g,2),C=w[0],k=w[1];function S(){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.prev=1,t.next=4,N.post("/auth",{email:p,password:b});case 4:k(!1),e("/"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),k(!1),(null===(n=t.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.validation)&&v(t.t0.response.data.validation);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){r.has("isAuthError")&&(_.b.error("Your session has expired!"),r.delete("isAuthError"),c(r))}),[]),Object(m.jsx)("div",{className:"auth",children:Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},className:"auth__container",children:Object(m.jsxs)("fieldset",{className:"auth__content",children:[Object(m.jsx)("h1",{className:"auth__title",children:"Sign In"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(E,{}),Object(m.jsx)("div",{className:"auth__or",children:"or"}),Object(m.jsxs)("div",{className:"auth__form-element",children:[Object(m.jsx)("label",{htmlFor:"emailField",children:"Email"}),Object(m.jsx)("input",{autoFocus:!0,type:"text",value:p,onChange:function(e){v((function(e){return Object(o.a)(Object(o.a)({},e),{},{email:""})})),h((function(t){return Object(o.a)(Object(o.a)({},t),{},{email:e.target.value})}))},placeholder:"amerzkfe1234@gmail.com",id:"emailField",style:x.email?{marginBottom:0}:{}}),x.email&&Object(m.jsx)("p",{className:"auth__field-error",children:x.email})]}),Object(m.jsxs)("div",{className:"auth__form-element",children:[Object(m.jsx)("label",{className:"auth-password-label-with-forgot",htmlFor:"passwordField",children:"Password"}),Object(m.jsx)("div",{className:"auth__forgot-password-container",children:Object(m.jsx)("input",{className:"auth__forgot-password button button-clear",type:"submit",value:"Forgot Password?"})}),Object(m.jsx)("input",{type:"password",value:b,onChange:function(e){v((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:""})})),h((function(t){return Object(o.a)(Object(o.a)({},t),{},{password:e.target.value})}))},placeholder:"********",id:"passwordField",style:x.password?{marginBottom:0}:{}}),x.password&&Object(m.jsx)("p",{className:"auth__field-error",children:x.password})]}),Object(m.jsx)("input",{type:"submit",disabled:C,value:"Send",onClick:S}),Object(m.jsx)("div",{className:"auth__instead",children:Object(m.jsx)(y.a,{to:"/sign-up",className:"button button-outline",children:"Sign Up Instead"})})]})]})})})}var L=n(37),M=n(36),T=n.n(M),V=function(e){var t=e.Element,n=Object(L.a)(e,["Element"]);return T.a.get("TLAccessToken")?Object(m.jsx)(t,Object(o.a)({},n)):Object(m.jsx)(F.a,{to:"/sign-in",replace:!0})};function U(e){var t=e.errorMessage,n=Object(F.q)();return console.error(n),Object(m.jsxs)("div",{id:"error-page",children:[Object(m.jsx)("h1",{children:"Oops!"}),Object(m.jsx)("p",{children:"Sorry, an unexpected error has occurred."}),Object(m.jsx)("p",{children:Object(m.jsx)("i",{children:t||n.statusText||n.message})}),Object(m.jsxs)("p",{children:["Get Back to Your ",Object(m.jsx)("a",{href:"/todo-list",children:"Todos"})]})]})}var B=Object(y.c)([{path:"/",element:Object(m.jsx)(V,{Element:C}),errorElement:Object(m.jsx)(U,{})},{path:"/sign-up",element:Object(m.jsx)(D,{})},{path:"/sign-in",element:Object(m.jsx)(A,{})},{path:"/google-error",element:Object(m.jsx)(U,{errorMessage:"Something went wrong while trying to log you in with Google"})}],{basename:"/todo-list"});s.a.render(Object(m.jsxs)(r.a.StrictMode,{children:[Object(m.jsx)(y.b,{router:B}),Object(m.jsx)(_.a,{})]}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.4c137adc.chunk.js.map